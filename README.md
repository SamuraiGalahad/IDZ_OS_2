# ИДЗ ОС 2
Выполнил Парахин Николай Викторович, БПИ 212

Условие:

Вариант 20

Задача о магазине – 2 (забывчивые покупатели). В магазине работают два отдела, каждый отдел обладает уникальным ассортиментом. В каждом отделе работает один продавец. В магазин ходят исключительно забывчивые покупатели, поэтому каждый покупfтель носит с собой список товаров, которые желает купить. Покупатель приобретает товары точно в том порядке, в каком они записаны в его списке. При этом товары в списке расположены в случайном порядке, что заставляет покупателя переходить от отдела к отделу, если это требуется для совершения покупок. Продавец может обслужить только одного покупателя за раз. Покупатель, вставший в очередь, засыпает пока не дойдет до продавца. Продавец засыпает, если в его отделе нет покупателей, и просыпается, если появится хотя бы один. Создать приложение, моделирующее работу магазина в течение рабочего дня. Каждого продавца и покупателя представить отдельным процессом.

## На 4 балла

Программа, реализованная на [4 балла](for4) реализует псевдоочередь, которая использует счетчик как разделяемую память для каждого из торговцев.

Использовал именованную разделяемую память и семафоры POSIX.

В данная программа была реализована на pthread для реализации процессов торговцев, и fork() + switch для реализации процессов покупателей.

Список покупок для пяти покупателей представляется в форме двумерного массива n = 5 на m = 5, где n - кол-во покупателей, m - кол - во покупок.

Вывод программы был следующим: [output.txt](for4/output_1.txt)

Если посчитать строки "покупок", то можно убедиться, что их всего 25, что соответствует ожидаему поведению от программы.

## На 5 баллов

Программа, реализованная на [5 баллов](for5/main.c) реализует псевдоочередь, которая использует счетчик как разделяемую память для каждого из торговцев.

Использовал неименованную разделяемую память и семафоры POSIX.

В данная программа была реализована на pthread для реализации процессов торговцев, и fork() + switch для реализации процессов покупателей.

Список покупок для пяти покупателей представляется в форме двумерного массива n = 5 на m = 5, где n - кол-во покупателей, m - кол - во покупок.

Вывод программы был следующим:

Если посчитать строки "покупок", то можно убедиться, что их всего 25, что соответствует ожидаему поведению от программы.

Также при изучении мною был замечен интересный нюанс: на OS компании Apple для компьютеров (Mac OS) нельзя создать неименованный семафор, поэтому данная программа была сделана мной на WSL.

## На 6 баллов

Программа, реализованная на [6 баллов](for6/main.c) реализует псевдоочередь, которая использует счетчик в виде семафора для каждого из торговцев.

Использовал разделяемую память и семафоры UNIX System V.

В данная программа была реализована на pthread для реализации процессов торговцев, и fork() + switch для реализации процессов покупателей.

Список покупок для пяти покупателей представляется в форме двумерного массива n = 5 на m = 5, где n - кол-во покупателей, m - кол - во покупок.

Вывод программы был следующим:

Если посчитать строки "покупок", то можно убедиться, что их всего 25, что соответствует ожидаему поведению от программы.

Данная программа наиболее похожа на очередь, и это можно заметить по выводу: [output.txt](for6/output.txt)

## На 7 баллов 

Программа реализована на 7 баллов. Процессы связаны именованными семафорами и пямятью POSIX.
Для работы программы изначально запускаются процессы торговцев ([Торговец 1](for7/merchant1.c), [Торговец 2](for7/merchant2.c)).
Затем процесс [клиентов](for7/clients.c), который запускает другое множество процессов через fork().

Вывод в программах был следующим, что ожидалось от поведении программы как очереди:
1) [вывод первого тоговца](for7/merchant.txt)
2) [вывод второго торговца](for7/merchant2.txt)
3) [вывод клиентов](for7/clients.txt)

Нужно заметить, что во всех программах и процессах торговцев присутствует параметр l, который обозначает время работы в некоторых единицах.

## На 8 баллов

Программа реализована на 8 баллов. Процессы связаны семафорами UNIX System V в виде счетчика.

Программа аналогична программе на 6 баллов, заисключением того, что теперь все процессы назначены про разным файлам.

Вывод был [следующим](for8/output.txt)


